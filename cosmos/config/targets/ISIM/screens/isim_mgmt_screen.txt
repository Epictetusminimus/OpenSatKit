###############################################################################
# Instrument Simulator (ISIM) App Screen
#
# Notes:
#   None  
#
# License:
#   Written by David McComas, licensed under the copyleft GNU General Public
#   License (GPL).
#
###############################################################################
<% 
   require 'osk_global'
   require 'isim_mgmt_screen'
%>

SCREEN AUTO AUTO 0.5
GLOBAL_SETTING BUTTON BACKCOLOR 221 221 221
  
TITLE "Instrument Simulator Application"
   SETTING BACKCOLOR 162 181 205
   SETTING TEXTCOLOR black
   SETTING TEXTCOLOR black
   GLOBAL_SETTING BUTTON BACKCOLOR 221 221 221


   VERTICALBOX "Commands"
      MATRIXBYCOLUMNS 4

         LABEL '            ISIM App:'
         BUTTON 'Noop'  'isim_mgmt_send_cmd(self, "NOOP")'
         BUTTON 'Reset' 'isim_mgmt_send_cmd(self, "RESET")'
         LABEL '                '

         LABEL '                 Power:'
         BUTTON 'On'    'isim_mgmt_send_cmd(self, "POWER_ON")'
            SETTING BACKCOLOR 70 255 95
         BUTTON 'Off'   'isim_mgmt_send_cmd(self, "POWER_OFF")'
            SETTING BACKCOLOR 255 70 95
         LABEL '                '

         LABEL '                 Power:'
         BUTTON 'Reset' 'isim_mgmt_send_cmd(self, "POWER_RESET")'
         LABEL '                '
         LABEL '                '

         LABEL '               Science:'
         BUTTON 'On'    'isim_mgmt_send_cmd(self, "SCIENCE_ON")'
            SETTING BACKCOLOR 70 255 95
         BUTTON 'Off'   'isim_mgmt_send_cmd(self, "SCIENCE_OFF")'
            SETTING BACKCOLOR 255 70 95
         LABEL '                '

         LABEL '                   Fault:'
         BUTTON 'On'    'isim_mgmt_send_cmd(self, "FAULT_ON")'
            SETTING BACKCOLOR 70 255 95
         BUTTON 'Off'   'isim_mgmt_send_cmd(self, "FAULT_OFF")'
            SETTING BACKCOLOR 255 70 95
         LABEL '                '

      END # Matrix
   END # VerticalBox Commands

   VERTICALBOX "Telemetry"
      MATRIXBYCOLUMNS 5

         LABEL 'Cmd Valid'
         VALUE ISIM HK_TLM_PKT CMD_VALID_COUNT WITH_UNITS 12
         LABEL '        '
         LABEL 'Cmd Error'
         VALUE ISIM HK_TLM_PKT CMD_ERROR_COUNT WITH_UNITS 12

         LABEL 'Power'
         VALUE ISIM HK_TLM_PKT INSTR_PWR_STATE WITH_UNITS 12
         LABEL '        '
         LABEL 'Fault'
         VALUE ISIM HK_TLM_PKT FAULT_PRESENT WITH_UNITS 12

         LABEL 'Pwr Init Cycle'
         VALUE ISIM HK_TLM_PKT PWR_INIT_CYCLE_CNT WITH_UNITS 12
         LABEL '        '
         LABEL 'Rst Init Cycle'
         VALUE ISIM HK_TLM_PKT PWR_RESET_CYCLE_CNT WITH_UNITS 12

         LABEL 'Science'
         VALUE ISIM HK_TLM_PKT SCI_STATE WITH_UNITS 12
         LABEL '        '
         LABEL '        '
         LABEL '        '

         LABEL 'Image Cnt'
         VALUE ISIM HK_TLM_PKT DETECTOR_IMAGE_CNT WITH_UNITS 12
         LABEL '        '
         LABEL 'Detector Row'
         VALUE ISIM HK_TLM_PKT DETECTOR_READOUT_ROW WITH_UNITS 12

         LABEL 'File Open'
         VALUE ISIM HK_TLM_PKT FILE_OPEN WITH_UNITS 12
         LABEL '        '
         LABEL 'File Image Cnt'
         VALUE ISIM HK_TLM_PKT FILE_IMAGE_CNT WITH_UNITS 12

      END # Matrix
         LABEL "Current science file: "
         VALUE ISIM HK_TLM_PKT SCI_FILENAME WITH_UNITS 50
   END # VerticalBox Telemetry
   SETTING BACKCOLOR 162 181 205

   HORIZONTALLINE
   LABEL "Flight Event Messages"
   NAMED_WIDGET evs_msg_t TEXTBOX CFE_EVS EVENT_MSG_PKT MESSAGE 580 50
